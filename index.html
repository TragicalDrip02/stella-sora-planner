<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stella Sora â€” Ascension Planner</title>

  <!-- Inter font for readability -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- app styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <div class="app">
    <div class="top-nav">
      <button id="addCharacterBtn" class="nav-button">Add Character</button>
      <button id="addDiscBtn" class="nav-button">Add Disc</button>
      <button id="manageInventoryBtn" class="nav-button">Manage Inventory</button>
      <button id="managePriorityBtn" class="nav-button">Manage Priority</button>

      <div class="spacer">
        <button id="themeToggle" class="nav-button">ðŸŒ™</button>
        <button id="copyBtn" class="nav-button">Copy Summary</button>
        <button id="exportBtn" class="nav-button">Export JSON</button>
      </div>
    </div>

    <div class="materials-summary panel">
      <div class="materials-header">
        <div style="display:flex;align-items:center;gap:12px">
          <h2 class="materials-title">Total Materials Needed</h2>
        </div>
        <div class="materials-mode-buttons">
          <button id="btnTotalNeeded" class="materials-mode-btn">Total Needed</button>
          <button id="btnRemainingNeeded" class="materials-mode-btn">Remaining Needed</button>
        </div>
      </div>

      <div id="materialsGrid" class="materials-grid"></div>
    </div>

    <div class="character-grid-wrap">
      <div id="characterGrid" class="character-grid"></div>
    </div>
  </div>

  <!-- List Modal (Select Character) -->
  <div id="listModal" class="modal" aria-hidden="true">
    <div class="modal-panel-list panel" role="dialog" aria-modal="true">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong style="font-size:1.1rem">Select Character</strong>
        <div style="display:flex;gap:8px;align-items:center">
          <input id="listSearch" placeholder="Search..."
            style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.08);color:inherit">
          <button id="closeListModal" class="nav-button">Close</button>
        </div>
      </div>

      <!-- Sorting select added here -->
      <div style="display:flex;gap:10px;align-items:center;">
        <label class="small muted" style="margin:0">Sort:
          <select id="sortCharactersSelect"
            style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.06);color:inherit">
            <option value="default">Default</option>
            <option value="name">Name</option>
            <option value="element">Element</option>
            <option value="quality">Rarity</option>
            <option value="position">Position</option>
            <option value="faction">Faction</option>
          </select>
        </label>

        <!-- Existing filters container -->
        <div id="listFilters" class="modal-controls" style="margin-left:auto"></div>
      </div>

      <div id="modalTiles" class="modal-tiles" style="margin-top:8px"></div>
    </div>
  </div>

  <!-- Details Modal -->
  <div id="detailsModal" class="modal" aria-hidden="true">
    <div class="modal-panel-details panel" role="dialog" aria-modal="true">
      <div style="display:flex;align-items:center;gap:12px">
        <div id="detailsPortrait"
          style="width:64px;height:64px;border-radius:10px;background-size:contain;background-repeat:no-repeat;background-position:center;border:1px solid rgba(255,255,255,0.04)">
        </div>
        <div>
          <div id="detailsName" style="font-weight:800">Character</div>
          <div id="detailsSub" class="small muted"></div>
        </div>
      </div>

      <div style="display:grid;grid-template-columns:1fr;gap:12px;align-items:start;">
        <div>
          <label class="small">Levels</label>
          <div style="display:flex;gap:12px;align-items:center;">
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="hdr" style="margin-bottom:4px;">Current</div>
              <select id="curLevel" class="level-select"></select>
            </div>
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="hdr" style="margin-bottom:4px;">Desired</div>
              <select id="desLevel" class="level-select"></select>
            </div>
          </div>
          <div style="margin-top:10px">
            <label class="small">Talents</label>
            <input id="talentsInput" type="number" min="0" max="10" value="0"
              style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.08);color:inherit" />
          </div>
        </div>

        <div>
          <div style="font-weight:700; margin-bottom:6px">Skills</div>
          <div class="skills-column" style="margin-top:8px">
            <div class="skill-set">
              <div class="small skill-label" style="margin-bottom:6px">Attack</div>
              <div style="display:flex;gap:8px;align-items:center"><select class="skill-cur"></select>
                <div>â†’</div><select class="skill-des"></select>
              </div>
            </div>
            <div class="skill-set">
              <div class="small skill-label" style="margin-bottom:6px">Main</div>
              <div style="display:flex;gap:8px;align-items:center"><select class="skill-cur"></select>
                <div>â†’</div><select class="skill-des"></select>
              </div>
            </div>
            <div class="skill-set">
              <div class="small skill-label" style="margin-bottom:6px">Support</div>
              <div style="display:flex;gap:8px;align-items:center"><select class="skill-cur"></select>
                <div>â†’</div><select class="skill-des"></select>
              </div>
            </div>
            <div class="skill-set">
              <div class="small skill-label" style="margin-bottom:6px">Ultimate</div>
              <div style="display:flex;gap:8px;align-items:center"><select class="skill-cur"></select>
                <div>â†’</div><select class="skill-des"></select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="display:flex;align-items:center;gap:8px">
        <input type="checkbox" id="obtainedFlag"><label for="obtainedFlag" class="small muted" style="margin:0">Obtained
          in-game</label>
      </div>

      <div style="display:flex;justify-content:flex-end;gap:8px">
        <button id="saveDetails" class="nav-button"
          style="background:linear-gradient(180deg,#4fd6ff,#6aa7ff);font-weight:800">Save</button>
        <button id="detailsClose" class="nav-button">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Inventory Modal -->
  <div id="inventoryModal" class="modal" aria-hidden="true">
    <div class="inventory-modal-panel panel" role="dialog" aria-modal="true">
      <div class="inv-topbar">
        <div class="inv-filter-left">
          <label class="small muted" style="margin:0">Filter:
            <select id="inventoryFilter"
              style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.08);color:inherit">
              <option>All</option>
              <option>Experience</option>
              <option>Character</option>
              <option>Disc</option>
              <option>Skill Materials</option>
              <option>Disc Materials</option>
              <option>Ascension Materials</option>
              <option>Weekly Boss</option>
              <option>Emblems</option>
              <option>Gifts</option>
              <option>Miscellaneous</option>
            </select>
          </label>
        </div>

        <div class="inv-dorra-center">
          <img src="assets/currencies/dorra.png" alt="Dorra">
          <input id="inventoryDorra" type="number" min="0" placeholder="0"
            style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.08);color:inherit;width:160px;text-align:center">
        </div>

        <div class="inv-controls-right">
          <input id="invImportFile" type="file" accept="application/json" style="display:none" />
          <button id="inventoryImport" class="nav-button">Import JSON</button>
          <button id="inventoryExport" class="nav-button">Export JSON</button>
          <button id="inventorySaveClose" class="nav-button">Save and Close</button>
        </div>
      </div>

      <div id="inventoryGrid" class="inv-grid"></div>

      <div style="display:flex;justify-content:flex-end;margin-top:8px">
        <button id="inventoryDeleteAll" class="nav-button"
          style="background:linear-gradient(180deg,#ff6b6b,#ff8f8f);">Delete All Inventory</button>
      </div>
    </div>
  </div>

  <!-- app script -->
  <script src="js/app.js"></script>
</body>
</html>
